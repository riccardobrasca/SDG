% In this file you should put the actual content of the blueprint.
% It will be used both by the web and the print version.
% It should *not* include the \begin{document}
%
% If you want to split the blueprint content into several files then
% the current file can be a simple sequence of \input. Otherwise It
% can start with a \section or \chapter for instance.

\chapter{The synthetic theory}

Let $R$ be a commutative ring.

\begin{definition}
  \label{SDG.D}
  \leanok
  \lean{SDG.D}
We denote by $D$ the subsemigroup of $R$
\[
\{r \in R \mbox{ such that } r ^ 2 = 0 \}
\]
\end{definition}

\begin{lemma}
  \label{SDG.zero_mem_D}
  \leanok
  \lean{SDG.zero_mem_D}
  \uses{SDG.D}
  We have that $0 \in D$
\end{lemma}
\begin{proof}
  \leanok
  Obvious.
\end{proof}

Let $\iota \colon D \to R$ be the natural inclusion.

\begin{lemma}
  \label{SDG.coe_sq}
  \leanok
  \lean{SDG.coe_sq}
  \uses{SDG.zero_mem_D}
  As an element of $D \to R$, we have that $\iota^2 = 0$.
\end{lemma}
\begin{proof}
  \leanok
  Simple calculation.
\end{proof}

\begin{definition}
  \label{SDG.α}
  \leanok
  \lean{SDG.α}
  \uses{SDG.coe_sq}
Let $R[\varepsilon]$ denote the ring of dual numbers of $R$, and let $\alpha$ be the unique $R$-algebra
morphism $R[\varepsilon] \to (D \to R)$ such that $\alpha(\varepsilon) = \iota$. It exists by the universal
property of $R[\varepsilon]$ and Lemma \ref{SDG.coe_sq}.
\end{definition}

\begin{lemma}
  \label{SDG.α_apply}
  \leanok
  \lean{SDG.α_apply}
  \uses{SDG.α}
  For all $a + b \varepsilon \in R[\varepsilon]$ and $d \in D$ we have
  \[
  \alpha (a + b \varepsilon \in R[\varepsilon]) d = a + d \cdot b
  \]
\end{lemma}
\begin{proof}
  \leanok
  Obvious.
\end{proof}

\begin{definition}
  \label{SDG.IsKockLawvere}
  \leanok
  \lean{SDG.IsKockLawvere}
  \uses{SDG.D}
We say that $R$ is \emph{Kock--Lawvere} if it is nontrivial and forall $g : D → R$ there is a unique
$b \in R$ such that forall $d \in D$ we have $g(d) = g(0) + d \cdot b$.
\end{definition}
